<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hung">
<meta name="dcterms.date" content="2025-07-26">
<meta name="description" content="Do exercises and extend">

<title>Complex noun phrases and complex prepositions – Kim Hung’s ThinkStack</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-R5TB4V4ZYS"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-R5TB4V4ZYS', { 'anonymize_ip': true});
</script>

<!-- 
Load Academicons v1: https://jpswalsh.github.io/academicons/
-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">


<!---
The following code are needed to show dimension citation and altmetrics.
https://api.altmetric.com/embeds.html
https://badge.dimensions.ai/
--->

<script type="text/javascript" src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>

<script async="" src="https://badge.dimensions.ai/badge.js" charset="utf-8"></script>

<script type="text/javascript" src="//cdn.plu.mx/widget-popup.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kim Hung’s ThinkStack</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.md"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-mathematics" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Mathematics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-mathematics">    
        <li>
    <a class="dropdown-item" href="../../math/convex-optimization/">
 <span class="dropdown-text">Convex Optimization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../math/probability/">
 <span class="dropdown-text">Probability</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../math/statistics/">
 <span class="dropdown-text">Statistics</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../artificial-intelligent.html"> 
<span class="menu-text">AI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../programming.html"> 
<span class="menu-text">Programming</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../english.html"> 
<span class="menu-text">English</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../posts.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#complex-noun-phrases" id="toc-complex-noun-phrases" class="nav-link active" data-scroll-target="#complex-noun-phrases"><span class="header-section-number">1</span> Complex noun phrases</a></li>
  <li><a href="#complex-prepositions" id="toc-complex-prepositions" class="nav-link" data-scroll-target="#complex-prepositions"><span class="header-section-number">2</span> Complex prepositions</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">3</span> Exercises</a>
  <ul class="collapse">
  <li><a href="#build-more-complex-noun-phrases-by-adding-the-information-in-brackets-to-the-noun-phrases-in-appropriate-positions-in-each-sentence.-the-main-nouns-in-each-complex-noun-phrase-are-in-bold." id="toc-build-more-complex-noun-phrases-by-adding-the-information-in-brackets-to-the-noun-phrases-in-appropriate-positions-in-each-sentence.-the-main-nouns-in-each-complex-noun-phrase-are-in-bold." class="nav-link" data-scroll-target="#build-more-complex-noun-phrases-by-adding-the-information-in-brackets-to-the-noun-phrases-in-appropriate-positions-in-each-sentence.-the-main-nouns-in-each-complex-noun-phrase-are-in-bold."><span class="header-section-number">3.1</span> Build more complex noun phrases by adding the information in brackets to the noun phrase(s) in appropriate positions in each sentence. The main nouns in each complex noun phrase are in bold.</a></li>
  <li><a href="#reword-the-italicized-part-of-the-sentence-using-a-noun-phrase-with-a-noun-preposition.-the-noun-should-be-related-to-the-verb-or-adjective-in-bold." id="toc-reword-the-italicized-part-of-the-sentence-using-a-noun-phrase-with-a-noun-preposition.-the-noun-should-be-related-to-the-verb-or-adjective-in-bold." class="nav-link" data-scroll-target="#reword-the-italicized-part-of-the-sentence-using-a-noun-phrase-with-a-noun-preposition.-the-noun-should-be-related-to-the-verb-or-adjective-in-bold."><span class="header-section-number">3.2</span> Reword the italicized part of the sentence using a noun phrase with a noun + preposition. The noun should be related to the verb or adjective in bold.</a></li>
  <li><a href="#complete-the-sentences-with-a-complex-preposition-from-i-and-a-word-phrase-from-ii" id="toc-complete-the-sentences-with-a-complex-preposition-from-i-and-a-word-phrase-from-ii" class="nav-link" data-scroll-target="#complete-the-sentences-with-a-complex-preposition-from-i-and-a-word-phrase-from-ii"><span class="header-section-number">3.3</span> Complete the sentences with a complex preposition from (i) and a word phrase from (ii)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Complex noun phrases and complex prepositions</h1>
  <div class="quarto-categories">
    <div class="quarto-category">english</div>
    <div class="quarto-category">grammar</div>
  </div>
  </div>

<div>
  <div class="description">
    Do exercises and extend
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://kimhungbui.github.io">Hung</a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Cambridge Advance Grammar in Use
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 26, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="complex-noun-phrases" class="level1 page-columns page-full" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Complex noun phrases</h1>
<p>Long, complex noun phrases are typical of academic writing, allowing a lot of information to be included within one sentence element. They can make up <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> substantial parts of academic texts as subjects, objects, and complements. The complex noun phrases in this extract are in italics with the main noun in each phrase in bold.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><strong>🔍 “make up” (phrasal verb)</strong><br>
Means:<br>
- <strong>form</strong><br>
- <strong>constitute</strong><br>
- <strong>compose</strong></p>
<p>📘 Example meaning:<br>
&gt; Complex noun phrases <strong>make up</strong> (= form) large parts of academic writing.</p>
</div></div><p>The <strong>changes</strong> in map data collection and representation that have arisen with the introduction of computers and digital techniques are remarkable. <strong>Information</strong> that used to be collected manually from surveys and ground observations can now be collected almost instantaneously by orbiting <strong>satellites</strong> that send data to Earth at the speed of light. <strong>Maps</strong> that were once hand-drawn can now be produced on a computer and printed out in a relatively short <strong>amount</strong> of time.</p>
<p>Note the word order in complex noun phrases -</p>
<ul>
<li>The most common elements <em>before</em> the main noun in a complex noun phrase are: determiners (e.g.&nbsp;<em>a, the</em>), and adjectives (<em>e.g.&nbsp;orbiting</em>)</li>
<li>The most common elements <em>after</em> the main noun are: relative clauses (<em>e.g.: that were once hand-drawn</em>), and adjectives (<em>e.g.&nbsp;orbiting</em>)</li>
<li>After the main noun in particular, elements are often embedded within others. For example, the relative clause <em>that have arisen with the introduction of computers</em> includes the prepositional phrase <em>with the introduction of computers</em> which in turn includes the prepositional phrase of <em>computers</em>.</li>
</ul>
<p>In academic writing we tend to use nouns to talk about <em>actions</em> and <em>processes</em> (more typically associated with verbs), and <em>qualities</em> (more typically associated with adjectives). This use of a noun to convey a meaning usually expressed with a word from another class is referred to as <em>nominalization</em>, and this process often results in a complex noun phrase. Compare the noun phrases in these two texts:</p>
<ol type="i">
<li><p>Organizations have reported that <strong>the number of people volunteering has decreased rapidly</strong> in recent years. At the same time, <strong>more opportunities to volunteer have become available</strong>.</p></li>
<li><p><strong>An extremely rapid decrease in volunteering</strong> has been reported in recent years. At the same time, <strong>the availability of opportunities to volunteer has increased</strong>.</p></li>
</ol>
<p>Where (i) uses a verb (<em>has decreased</em>) and adjective (<em>available</em>), (ii), more typical of academic writing, uses nouns (<em>decrease, availability</em>).</p>
</section>
<section id="complex-prepositions" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Complex prepositions</h1>
<p>Complex prepositions comprise two, three or four words. Some of these occur more frequently in academic writing than in general use. For example:</p>
<ul>
<li><strong>As for</strong> the future, demand for electricity is expected to grow at a rate of 5% per annum. (= regarding)</li>
<li>The final chapter considers inequalities in health <strong>with reference to</strong> race and gender. (= what it is about)</li>
<li>Monthly average temperatures were higher than average <strong>with the exception of</strong> June. (= not including)</li>
</ul>
<div class="collum-margin">
<p>Also: <strong>as a result of, as distinct from, as opposed to, depending on, in comparison with, in line with, in the case of, irrespective of, on the part of, prior to, regardless of</strong></p>
</div>
<p>Note that four-word prepositions usually end in <em>of</em> and include an article.</p>
<p>Complex prepositions often occur as part of complex noun phrases:</p>
<ul>
<li>This essay has discussed <em>class identity</em> <strong>with reference to</strong> <em>gender differences</em>.</li>
<li>The study found a <em>less positive attitude</em> <strong>in the case of</strong> <em>customers exposed</em> to <em>advertising and marketing communications</em>.</li>
</ul>
</section>
<section id="exercises" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Exercises</h1>
<section id="build-more-complex-noun-phrases-by-adding-the-information-in-brackets-to-the-noun-phrases-in-appropriate-positions-in-each-sentence.-the-main-nouns-in-each-complex-noun-phrase-are-in-bold." class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="build-more-complex-noun-phrases-by-adding-the-information-in-brackets-to-the-noun-phrases-in-appropriate-positions-in-each-sentence.-the-main-nouns-in-each-complex-noun-phrase-are-in-bold."><span class="header-section-number">3.1</span> Build more complex noun phrases by adding the information in brackets to the noun phrase(s) in appropriate positions in each sentence. The main nouns in each complex noun phrase are in bold.</h2>
<ol type="1">
<li>The/ <strong>decrease</strong> in price for the country’s / exports began in mid 2015. (<em>the decrease was considerable</em>) (<em>the decrease was in mineral exports</em>)</li>
</ol>
<p>-&gt; The considerable decrease in price for the country’s mineral exports began in mid 2015.</p>
<ol start="2" type="1">
<li>A <strong>study</strong> published in 2007 predicted a <strong>peak</strong> in the population of 9.2 billion.</li>
</ol>
<p>(<em>the study predicted a global peak</em>) (<em>The peak will be reached in 2050</em>).</p>
<p>-&gt; A <strong>study</strong> published in 2007 predicted a global <strong>peak</strong> in the population of 9.2 billion in 2050.</p>
<p>OR</p>
<p>A study published in 2007 predicted a peak in the global population in 2050 of 9.2 billion.</p>
<ol start="3" type="1">
<li>One <strong>influence</strong> that affects the character of a society is the <strong>process</strong> of communication.</li>
</ol>
<p>(<em>the influence is particularly important</em>) (<em>the influence is cultural</em>) (<em>the influence also affects the speed of change of a society.</em>)</p>
<p>-&gt; One particularly important cultural influence that affects the character of a society is the speed process of communication. NO</p>
<p>Right -&gt; One particularly important cultural influence that affects the character and speed of change of a society is the process of communication.</p>
<ol start="4" type="1">
<li>A <strong>factor</strong> in the rise of today’s free market economy was the <strong>growth</strong> of trade in Asia in the 16th century.</li>
</ol>
<p>(<em>the factor was key</em>) (<em>today’s free market economy is globalized</em>) (<em>the trade was in commodities</em>)</p>
<p>-&gt; A <em>key</em> factor in the rise of today’s <em>globalized</em> free market economy was the growth of trade <em>in commodities</em> in Asia in the 16th century.</p>
<ol start="5" type="1">
<li>The government’s <strong>policies</strong> after World War II were influenced by the <strong>ideas</strong> of John Maynard Keynes.</li>
</ol>
<p>(<em>this refers to the British goverment</em>) (<em>the policies related to economics</em>) (<em>John Maynard Keynes was an economist</em>) (<em>Keynes lived from 1883 to 1946</em>)</p>
<p>-&gt; The <em>British</em> government’s <em>economic</em> policies after World War II were influenced by the ideas of an economist who lived from 1883 to 1946 John Maynard. NOT</p>
<p>Right -&gt; The <em>British</em> government’s <em>economic</em> policies immediately after World War II were influenced by the ideas of the economist John Maynard Keynes (<em>1883-1946</em>) / <em>who lived from 1883 to 1946.</em></p>
</section>
<section id="reword-the-italicized-part-of-the-sentence-using-a-noun-phrase-with-a-noun-preposition.-the-noun-should-be-related-to-the-verb-or-adjective-in-bold." class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="reword-the-italicized-part-of-the-sentence-using-a-noun-phrase-with-a-noun-preposition.-the-noun-should-be-related-to-the-verb-or-adjective-in-bold."><span class="header-section-number">3.2</span> Reword the italicized part of the sentence using a noun phrase with a noun + preposition. The noun should be related to the verb or adjective in bold.</h2>
<ol type="1">
<li><p>Harris (2012) points out <em>how <strong>important</strong> public transport is</em> in economic development.</p>
<p>-&gt; Harris (2012) points out <font color="#00b050">the importance of public transport</font> in economic development.</p></li>
<li><p>Measuring <em>how similar two documents are</em> is an important process in automatically marking essays.</p>
<p>-&gt; Measuring <font color="#00b050">the similarity between/of two documents</font> is an important process in automatically marking essays.</p></li>
<li><p>Recent investment from overseas has resulted in <em>200,000 jobs being <strong>created</strong></em>.</p>
<p>-&gt; Recent investment from overseas has resulted in <font color="#00b050">the creation of 200,000 jobs</font>.</p></li>
<li><p>Expansion of tourism in the region was used to <strong><em>justify</em></strong> building the new airport.</p>
<p>-&gt; Expansion of tourism in the region was used <font color="#00b050">as a justification for</font> building the new airport.</p></li>
<li><p>The study found <em>that the reading habits of 6 year old girls and boys were greatly <strong>different</strong></em>.</p>
<p>-&gt; The study found <font color="#00b050">a great difference</font> <del>of</del> <font color="#00b050">in/between the reading habits of 6 year old girls and boys</font>.</p></li>
</ol>
</section>
<section id="complete-the-sentences-with-a-complex-preposition-from-i-and-a-word-phrase-from-ii" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="complete-the-sentences-with-a-complex-preposition-from-i-and-a-word-phrase-from-ii"><span class="header-section-number">3.3</span> Complete the sentences with a complex preposition from (i) and a word phrase from (ii)</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 58%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th>(i)</th>
<th>(ii)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>as opposed to, on the part of, prior to, regardless, in the case of</td>
<td>ability, human error, marketing, plants, reader</td>
</tr>
</tbody>
</table>
<ol type="1">
<li><font color="#00b050">In the case of plants</font>, endangered species can be put into seed banks.</li>
<li>It is unreasonable to expect that all side-effects of a drug are identified <font color="#00b050">prior to marketing</font>.</li>
<li>Musical activities are encouraged among all children at school <font color="#00b050">regardless ability</font>.</li>
<li>The book assumes considerable prior knowledge of biology <font color="#00b050">on the part of reader</font>.</li>
<li>The mistakes were the result of software faults <font color="#00b050">as opposed to human error</font>.</li>
<li>Many people had already left the region <font color="#00b050">as a result of</font> several years of drought.</li>
<li><font color="#00b050">According to</font> Chirstie (2006), three main approaches to the teaching of reading can be identified.</li>
<li>The idea of “the humanities”, <font color="#00b050">as distinct from/ as opposed to</font> the sciences, grew up in the 19th centuty.</li>
<li>These results are <font color="#00b050">in line with</font> to those reported in Slobin (2008) and Hilleras (2019).</li>
<li>82% of the respondents lived in their own property. <font color="#00b050">As for / in case of</font> the rest, 12% lived in a rented property and 6% lived with a relative.</li>
</ol>
<div class="margin-note">
<p>in sentence 9, we do not use “are depending on”</p>
<p>❌ Incorrect tense and verb choice</p>
<p>✅ Should be: “depend on” or “are based on” if you mean origin</p>
<p>❌ But in your sentence, you’re not comparing cause — you’re comparing difference, so this phrase isn’t needed at all.</p>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>🔍 <em>“make up”</em> means to <strong>form</strong>, <strong>constitute</strong>, or <strong>compose</strong>.<br>
Used in: <em>They can make up substantial parts of academic texts</em> → <em>They form a large part of…</em><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/kimhungbui\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>